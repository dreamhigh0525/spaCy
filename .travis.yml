language: python

sudo: required
dist: trusty
group: edge

python:
   - "2.7"
   - "3.5"

os:
  - linux

env:
  - VIA="pypi"
  - VIA="compile"

install:
  - "./travis.sh"

script:
  - echo $VIA
  - echo $TRAVIS_PULL_REQUEST
  - "pip install pytest"
  - if [[ "${VIA}" == "compile" ]]; then SPACY_DATA=models/en python -m pytest spacy; fi
  - if [[ "${TRAVIS_PULL_REQUEST}" == "false" && "${VIA}" == "pip" ]]; then python -m pytest spacy; fi
